# Clean Code

## 의미 있는 이름
- 의도를 분명히 밝혀라  
- 그릇된 정보를 피하라  
- 의미 있게 구분하라  
- 발음하기 쉬운 이름을 사용하라
- 검색하기 쉬운 이름을 사용하라
- 인코딩을 피하라(헝가리식 표기법, 멤버 변수 접두어, 등)
- 자신의 기억력을 자랑하지 마라
- 클래스 이름과 객체 이름은 명사나 명사구가 적합하다
- 메서드 이름은 동사나 동사구가 적합하다
- 기발한 이름은 피하라
- 한 개념에 한 단어를 사용하라
- 말장난을 하지 마라
- 해법 영역에서 가져온 이름을 사용하라(전산 용어, 알고리즘 이름, 등)
- 문제 영역에서 가져온 이름을 사용하라(적절한 '프로그래머 용어'가 없다면)
- 의미 있는 맥락을 추가하라(클래스를 생성)
- 불필요한 맥락을 없애라(일반적으로 짧은 이름이 긴 이름보다 좋지만 의미가 분명할 경우에 한해서)

## 함수
- 작게 만들어라(블록은 한 줄, 들여쓰기는 1, 2단)
- 한 가지만 해라
- 함수 당 추상화 수준은 하나로(위에서 아래로 코드 읽기)
- Switch 문(다형성을 이용)
- 서술적인 이름을 사용하라(예. includeSetupAndTeardownPages)
- 함수 인수(적을수록 좋다)
- 부수 효과를 일으키지 마라(시간적인 결합이나 순서 종속성)
- 명령과 조회를 분리하라
- 오류 코드보다 예외를 사용하라(Try/Catch 블록 뽑아내기, 오류 처리도 한 가지 작업)
- 반복하지 마라
- 구조적 프로그래밍(함수가 클 경우 함수 내 모든 블록에 입구와 출구는 하나만 존재)
- 함수를 어떻게 짜죠?(처음에는 길고 복잡, 코드는 항상 단위 테스트를 통과)
- 프로그래밍의 기술은 언제나 언어 설계의 기술이다

## 주석
- 주석은 나쁜 코드를 보완하지 못한다
- 코드로 의도를 표현하라
- 좋은 주석
  - 법적인 주석
  - 정보를 제공하는 주석
  - 의도를 설명하는 주석
  - 의미를 명료하게 밝히는 주석
  - 결과를 경고하는 주석
  - TODO 주석
  - 중요성을 강조하는 주석
- 나쁜 주석
  - 주절거리는 주석
  - 같은 이야기를 중복하는 주석
  - 오해할 여지가 있는 주석
  - 의무적으로 다는 주석
  - 이력을 기록하는 주석
  - 있으나 마나 한 주석
  - 무서운 잡음
  - 함수나 변수로 표현할 수 있다면 주석을 달지 마라
  - 위치를 표시하는 주석
  - 닫는 괄호에 다는 주석
  - 공로를 돌리거나 저자를 표시하는 주석
  - 주석으로 처리한 코드
  - HTML 주석
  - 전역 정보
  - 너무 많은 정보
  - 모호한 관계
  - 함수 헤더

## 형식 맞추기
- 코드 형식은 전문 개발자의 일차적인 의무
- 적절한 행 길이를 유지하라(200줄 정도)
  - 신문 기사처럼 작성하라
  - 개념은 빈 행으로 분리하라
  - 세로 밀집도는 연관성을 의미
  - 변수는 사용하는 위치에 최대한 가까이 선언
  - 인스턴스 변수는 클래스 맨 처음에 선언
  - 호출하는 함수를 호출되는 함수보다 먼저 배치
  - 친화도가 높을수록 코드를 가까이 배치
- 가로 형식 맞추기(120자)
  - 가로 공백과 밀집도
  - 들여쓰기(짧아도)
- 모든 팀원은 규칙을 따라야 한다

## 객체와 자료 구조
- 자료 추상화(구현을 감추려면 추상적인 개념으로 표현)
- 자료/객체 비대칭(절차적인 코드 or 객체 지향 코드 중 선택)
- 디미터 법칙(모듈은 자신이 조작하는 객체의 속사정을 몰라야 한다는 법칙)
  - 기차 충돌<sup>train wreck</sup>
  - 잡종 구조
  - 구조체 감추기
- 자료 전달 객체<sup>Data Transfer Object, DTO</sup>
  - 활성 레코드

## 오류 처리  
- 오류 코드보다 예외를 사용하라
- Try-Catch-Finally 문부터 작성하라(먼저 강제로 예외를 일으키는 테스트 케이스를 작성한 후 테스트를 통과하게 코드를 작성)
- 미확인<sup>unchecked</sup> 예외를 사용하라
- 예외에 의미를 제공하라
- 호출자를 고려해 예외 클래스를 정의하라(프로그래머에게 가장 중요한 관심사는 오류를 잡아내는 방법)
- null을 반환하지 마라
- null을 전달하지 마라

## 경계
- 외부 코드 사용하기(Map과 같은 경계 인터페이스를 이용할 때는 이를 이용하는 클래스나 클래스 계열 밖으로 노출되지 않도록 주의)
- 경계 살피고 익히기(학습 테스트: 곧바로 우리쪽 코드를 작성하는 대신 테스트 케이스를 작성해 외부 코드를 학습)
- 학습 테스트는 공짜 이상이다(실제 코드와 동일한 방식으로 인터페이스를 사용하는 테스트 케이스가 필요)
- 아직 존재하지 않는 코드를 사용하기(아는 코드와 모르는 코드를 분리하는 경계)
- 깨끗한 경계(경계에 위치하는 코드는 깔금히 분리, 외부 패키지를 호출하는 코드를 가능한 줄여 경계를 관리)

## 단위 테스트
- TDD 법칙 세 가지
  - 첫째 법칙: 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다
  - 둘째 법칙: 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다
  - 셋째 법칙: 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다
- 깨끗한 테스트 코드 유지하기(테스트는 유연성, 유지보수성, 재사용성을 제공)
- 깨끗한 테스트 코드(가독성, 가독성, 가독성)  
- 테스트 함수마다 한 개념만 테스트하라
- F.I.R.S.T
  - 빠르게<sup>Fast</sup>: 테스트는 빨리 돌아야 한다  
  - 독립적으로<sup>Independent</sup>: 각 테스트는 독립적이고 어떤 순서로 실행해도 괜찮아야 한다  
  - 반복가능하게<sup>Repeatable</sup>: 테스트는 어떤 환경에서도 반복 가능해야 한다  
  - 자가검증하는<sup>Self-Validating</sup>: 테스트는 부울<sup>bool</sup> 값으로 결과를 내야 한다  
  - 적시에<sup>Timely</sup>: 단위 테스트는 테스트하려는 실제 코드를 구현하기 직전에 구현해야 한다  

## 클래스
- 클래스 체계(변수 목록 → 공개 함수)
- 클래스는 작아야 한다!(단일 책임 원칙, 클래스가 응집력을 잃는다면 분리)
- 변경하기 쉬운 클래스(새 기능을 추가할 때 시스템을 확장할 뿐 기존 코드를 변경하지 않는다)

## 시스템
- 시스템 제작과 시스템 사용을 분리하라(Main 분리, 팩토리, 의존성 주입)
- 확장(관심사를 적절히 분리해 관리)
- 테스트 주도 시스템 아키텍처 구축
- 의사 결정을 최적화하라(가능한 마지막 순간까지 결정을 미루기)
- 명백한 가치가 있을 때 표준을 현명하게 사용하라
- 시스템은 도메인 특화 언어가 필요하다

## 창발성
- 모든 테스트를 실행하라(테스트 케이스를 작성하면 설계 품질이 높아진다)
- 중복을 없애라(템플릿 메소드 패턴)
- 표현하라(좋은 이름을 선택, 함수와 클래스 크기를 가능한 줄이기, 표준 명칭을 사용, 단위 테스트 케이스를 작성)
- 클래스와 메서드 수를 최소로 줄여라(함수와 클래스 크기를 작게 유지하면서 동시에 시스템 크기도 작게 유지)
